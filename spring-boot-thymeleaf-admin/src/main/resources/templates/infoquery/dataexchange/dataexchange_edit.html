<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
<!-- 下拉框 -->
<link rel="stylesheet" th:href="@{/ace/css/chosen.css}"/>
<dif th:include="system/index/top::tophead"></dif>
</head>
<body class="no-skin">
	<!-- /section:basics/navbar.layout -->
	<div class="main-container" id="main-container">
		<!-- /section:basics/sidebar -->
		<div class="main-content">
			<div class="main-content-inner">
				<div class="page-content">
					<div class="page-header">
							<h1>
								<small>
									<i class="ace-icon fa fa-angle-double-right"></i>
									编辑
								</small>
							</h1>
					</div><!-- /.page-header -->
					<div class="row">
						<div class="col-xs-8 col-xs-offset-2">

							<form th:action="@{'/infoquery/dataexchange'+${action}}" name="Form" id="Form"
								method="post">
								<input type="hidden" name="ID" id="ID" th:value="${dataexchange == null ? '' : dataexchange.ID}" />
								<div id="zhongxin" style="padding-top: 13px;">
									<table id="table_report"
										class="table table-striped table-bordered table-hover">
										
										<tr>
											<td style="text-align: right; padding-top: 13px;">交易日期:</td>
											<td><input type="text" name="TRANS_DATE" id="TRANS_DATE"
												th:value="${dataexchange == null ? '' : dataexchange.TRANS_DATE}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">业务类型:</td>
											<td>
											<select
												class="chosen-select form-control" name="YWLX"
												id="YWLX" data-placeholder="业务类型"
												style="vertical-align: top;">
													<option value=""></option>
													<option th:each="item,status : ${ywlxList}" th:selected="${item.BIANMA == (dataexchange == null ? '' : dataexchange.YWLX)}" th:value="${item.BIANMA}" th:inline="text">[[${item.NAME}]]</option>
												</select>
											</td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">积分账号:</td>
											<td>
											<select
												class="chosen-select form-control" name="POINTS_NO"
												id="POINTS_NO" data-placeholder="积分账号"
												style="vertical-align: top;">
													<option value=""></option>
													<option th:each="item,status : ${pointsnoList}" th:selected="${item.BIANMA == (dataexchange == null ? '' : dataexchange.POINTS_NO)}" th:value="${item.BIANMA}" th:inline="text">[[${item.NAME}]]</option>
												</select>
											</td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">积分类型:</td>
											<td>
											<select
												class="chosen-select form-control" name="POINTS_TYPE"
												id="POINTS_TYPE" data-placeholder="积分类型"
												style="vertical-align: top;">
													<option value=""></option>
													<option th:each="item,status : ${pointstypeList}" th:selected="${item.BIANMA == (dataexchange == null ? '' : dataexchange.POINTS_TYPE)}" th:value="${item.BIANMA}" th:inline="text">[[${item.NAME}]]</option>
												</select>
											</td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">商城编码:</td>
											<td><input type="text" name="SHOP_CODE" id="SHOP_CODE"
												th:value="${dataexchange == null ? '' : dataexchange.SHOP_CODE}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">积分流水号:</td>
											<td><input type="text" name="POINTS_NUM" id="POINTS_NUM"
												th:value="${dataexchange == null ? '' : dataexchange.POINTS_NUM}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">外围流水号:</td>
											<td><input type="text" name="WWLSH" id="WWLSH"
												th:value="${dataexchange == null ? '' : dataexchange.WWLSH}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">批处理号:</td>
											<td><input type="text" name="BATCH_ID" id="BATCH_ID"
												th:value="${dataexchange == null ? '' : dataexchange.BATCH_ID}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">机构编码:</td>
											<td>
											<select
												class="chosen-select form-control" name="ORGCODE"
												id="ORGCODE" data-placeholder="机构编码"
												style="vertical-align: top;">
													<option value=""></option>
													<option th:each="item,status : ${orgcodeList}" th:selected="${item.BIANMA == (dataexchange == null ? '' : dataexchange.ORGCODE)}" th:value="${item.BIANMA}" th:inline="text">[[${item.NAME}]]</option>
												</select>
											</td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">卡号:</td>
											<td><input type="text" name="CARD_NBR" id="CARD_NBR"
												th:value="${dataexchange == null ? '' : dataexchange.CARD_NBR}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">持卡人姓名:</td>
											<td><input type="text" name="SURNAME" id="SURNAME"
												th:value="${dataexchange == null ? '' : dataexchange.SURNAME}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">会员卡姓:</td>
											<td><input type="text" name="LAST_NM" id="LAST_NM"
												th:value="${dataexchange == null ? '' : dataexchange.LAST_NM}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">会员卡名:</td>
											<td><input type="text" name="FIRST_NM" id="FIRST_NM"
												th:value="${dataexchange == null ? '' : dataexchange.FIRST_NM}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">会员号:</td>
											<td><input type="text" name="USER_ID" id="USER_ID"
												th:value="${dataexchange == null ? '' : dataexchange.USER_ID}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">证件类型:</td>
											<td><input type="text" name="CUSTR_TYPE" id="CUSTR_TYPE"
												th:value="${dataexchange == null ? '' : dataexchange.CUSTR_TYPE}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">证件号码:</td>
											<td><input type="text" name="CUSTR_NBR" id="CUSTR_NBR"
												th:value="${dataexchange == null ? '' : dataexchange.CUSTR_NBR}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">积分增减标志:</td>
											<td>
											<select
												class="chosen-select form-control" name="POINTS_SIGN"
												id="POINTS_SIGN" data-placeholder="积分增减标志"
												style="vertical-align: top;">
													<option value=""></option>
													<option th:each="item,status : ${pointssignList}" th:selected="${item.BIANMA == (dataexchange == null ? '' : dataexchange.POINTS_SIGN)}" th:value="${item.BIANMA}" th:inline="text">[[${item.NAME}]]</option>
												</select>
											</td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">交易积分:</td>
											<td><input type="text" name="POINTS" id="POINTS"
												th:value="${dataexchange == null ? '' : dataexchange.POINTS}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">优惠兑换值:</td>
											<td><input type="text" name="EXCHANGE_PRE" id="EXCHANGE_PRE"
												th:value="${dataexchange == null ? '' : dataexchange.EXCHANGE_PRE}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">普通兑换值:</td>
											<td><input type="text" name="EXCHANGE_COM" id="EXCHANGE_COM"
												th:value="${dataexchange == null ? '' : dataexchange.EXCHANGE_COM}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">总兑换值:</td>
											<td><input type="text" name="EXCHANGE" id="EXCHANGE"
												th:value="${dataexchange == null ? '' : dataexchange.EXCHANGE}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">上次状态变更日期:</td>
											<td><input type="text" name="LAST_DATE" id="LAST_DATE"
												th:value="${dataexchange == null ? '' : dataexchange.LAST_DATE}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">交易状态:</td>
											<td>
											<select
												class="chosen-select form-control" name="STATUS"
												id="STATUS" data-placeholder="交易状态"
												style="vertical-align: top;">
													<option value=""></option>
													<option th:each="item,status : ${statusList}" th:selected="${item.BIANMA == (dataexchange == null ? '' : dataexchange.STATUS)}" th:value="${item.BIANMA}" th:inline="text">[[${item.NAME}]]</option>
												</select>
											</td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">联系电话:</td>
											<td><input type="text" name="MOBILE" id="MOBILE"
												th:value="${dataexchange == null ? '' : dataexchange.MOBILE}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">录入方式:</td>
											<td>
											<select
												class="chosen-select form-control" name="INPUT_MTH"
												id="INPUT_MTH" data-placeholder="录入方式"
												style="vertical-align: top;">
													<option value=""></option>
													<option th:each="item,status : ${inputmthList}" th:selected="${item.BIANMA == (dataexchange == null ? '' : dataexchange.INPUT_MTH)}" th:value="${item.BIANMA}" th:inline="text">[[${item.NAME}]]</option>
												</select>
											</td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">柜员号:</td>
											<td><input type="text" name="GYH" id="GYH"
												th:value="${dataexchange == null ? '' : dataexchange.GYH}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">业务渠道:</td>
											<td><input type="text" name="YWQD" id="YWQD"
												th:value="${dataexchange == null ? '' : dataexchange.YWQD}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">备注:</td>
											<td><input type="text" name="MISC_TX" id="MISC_TX"
												th:value="${dataexchange == null ? '' : dataexchange.MISC_TX}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">响应码:</td>
											<td><input type="text" name="XYM" id="XYM"
												th:value="${dataexchange == null ? '' : dataexchange.XYM}" style="width: 98%;" /></td>
										</tr>
										<tr>
											<td style="text-align: right; padding-top: 13px;">响应信息:</td>
											<td><input type="text" name="XYXX" id="XYXX"
												th:value="${dataexchange == null ? '' : dataexchange.XYXX}" style="width: 98%;" /></td>
										</tr>
									</table>
								</div>
								<div id="zhongxin2" class="center" style="display: none">
									<br />
									<br />
									<br />
									<br />
									<br />
									<img th:src="@{/images/jiazai.gif}" /><br />
									<h4 class="lighter block green">提交中...</h4>
								</div>
							</form>
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.page-content -->
			</div>
		</div>
		<!-- /.main-content -->
	</div>
	<!-- /.main-container -->

	<footer>
		<div style="width: 100%; padding-bottom: 2px;" class="center">
			<a class="btn btn-mini btn-primary" onclick="save();">保存</a> <a
				class="btn btn-mini btn-danger" onclick="cancel();">取消</a>
		</div>
	</footer>

	<!-- 页面底部js¨ -->
	<div th:include="system/index/foot::footdiv" />
	<!-- 下拉框 -->
	<script th:src="@{/ace/js/chosen.jquery.js}"></script>
	<!--提示框-->
	<script type="text/javascript" th:src="@{/js/jquery.tips.js}"></script>
	<script type="text/javascript" th:inline="javascript">
		$(top.hangge());
		var action = [[${action}]];		
		
		function cancel(){
			/*<![CDATA[*/
			top.jzts();
			if(true && document.forms[0]){
				var url = /*[[${url}]]*/;
				document.forms[0].action = url;
				document.forms[0].submit();
			}
			/*]]>*/		
		}
		
		//保存
		function save() {
			if ($("#TRANS_DATE").val() == "") {
				$("#TRANS_DATE").tips({
					side : 3,
					msg : '请输入交易日期',
					bg : '#AE81FF',
					time : 2
				});
				$("#TRANS_DATE").focus();
				return false;
			}
			if ($("#SHOP_CODE").val() == "") {
				$("#SHOP_CODE").tips({
					side : 3,
					msg : '请输入商城编码',
					bg : '#AE81FF',
					time : 2
				});
				$("#SHOP_CODE").focus();
				return false;
			}
			if ($("#POINTS_NUM").val() == "") {
				$("#POINTS_NUM").tips({
					side : 3,
					msg : '请输入积分流水号',
					bg : '#AE81FF',
					time : 2
				});
				$("#POINTS_NUM").focus();
				return false;
			}
			if ($("#WWLSH").val() == "") {
				$("#WWLSH").tips({
					side : 3,
					msg : '请输入外围流水号',
					bg : '#AE81FF',
					time : 2
				});
				$("#WWLSH").focus();
				return false;
			}
			if ($("#BATCH_ID").val() == "") {
				$("#BATCH_ID").tips({
					side : 3,
					msg : '请输入批处理号',
					bg : '#AE81FF',
					time : 2
				});
				$("#BATCH_ID").focus();
				return false;
			}
			if ($("#CARD_NBR").val() == "") {
				$("#CARD_NBR").tips({
					side : 3,
					msg : '请输入卡号',
					bg : '#AE81FF',
					time : 2
				});
				$("#CARD_NBR").focus();
				return false;
			}
			if ($("#SURNAME").val() == "") {
				$("#SURNAME").tips({
					side : 3,
					msg : '请输入持卡人姓名',
					bg : '#AE81FF',
					time : 2
				});
				$("#SURNAME").focus();
				return false;
			}
			if ($("#LAST_NM").val() == "") {
				$("#LAST_NM").tips({
					side : 3,
					msg : '请输入会员卡姓',
					bg : '#AE81FF',
					time : 2
				});
				$("#LAST_NM").focus();
				return false;
			}
			if ($("#FIRST_NM").val() == "") {
				$("#FIRST_NM").tips({
					side : 3,
					msg : '请输入会员卡名',
					bg : '#AE81FF',
					time : 2
				});
				$("#FIRST_NM").focus();
				return false;
			}
			if ($("#USER_ID").val() == "") {
				$("#USER_ID").tips({
					side : 3,
					msg : '请输入会员号',
					bg : '#AE81FF',
					time : 2
				});
				$("#USER_ID").focus();
				return false;
			}
			if ($("#CUSTR_TYPE").val() == "") {
				$("#CUSTR_TYPE").tips({
					side : 3,
					msg : '请输入证件类型',
					bg : '#AE81FF',
					time : 2
				});
				$("#CUSTR_TYPE").focus();
				return false;
			}
			if ($("#CUSTR_NBR").val() == "") {
				$("#CUSTR_NBR").tips({
					side : 3,
					msg : '请输入证件号码',
					bg : '#AE81FF',
					time : 2
				});
				$("#CUSTR_NBR").focus();
				return false;
			}
			if ($("#POINTS").val() == "") {
				$("#POINTS").tips({
					side : 3,
					msg : '请输入交易积分',
					bg : '#AE81FF',
					time : 2
				});
				$("#POINTS").focus();
				return false;
			}
			if ($("#EXCHANGE_PRE").val() == "") {
				$("#EXCHANGE_PRE").tips({
					side : 3,
					msg : '请输入优惠兑换值',
					bg : '#AE81FF',
					time : 2
				});
				$("#EXCHANGE_PRE").focus();
				return false;
			}
			if ($("#EXCHANGE_COM").val() == "") {
				$("#EXCHANGE_COM").tips({
					side : 3,
					msg : '请输入普通兑换值',
					bg : '#AE81FF',
					time : 2
				});
				$("#EXCHANGE_COM").focus();
				return false;
			}
			if ($("#EXCHANGE").val() == "") {
				$("#EXCHANGE").tips({
					side : 3,
					msg : '请输入总兑换值',
					bg : '#AE81FF',
					time : 2
				});
				$("#EXCHANGE").focus();
				return false;
			}
			if ($("#LAST_DATE").val() == "") {
				$("#LAST_DATE").tips({
					side : 3,
					msg : '请输入上次状态变更日期',
					bg : '#AE81FF',
					time : 2
				});
				$("#LAST_DATE").focus();
				return false;
			}
			if ($("#MOBILE").val() == "") {
				$("#MOBILE").tips({
					side : 3,
					msg : '请输入联系电话',
					bg : '#AE81FF',
					time : 2
				});
				$("#MOBILE").focus();
				return false;
			}
			if ($("#GYH").val() == "") {
				$("#GYH").tips({
					side : 3,
					msg : '请输入柜员号',
					bg : '#AE81FF',
					time : 2
				});
				$("#GYH").focus();
				return false;
			}
			if ($("#YWQD").val() == "") {
				$("#YWQD").tips({
					side : 3,
					msg : '请输入业务渠道',
					bg : '#AE81FF',
					time : 2
				});
				$("#YWQD").focus();
				return false;
			}
			if ($("#MISC_TX").val() == "") {
				$("#MISC_TX").tips({
					side : 3,
					msg : '请输入备注',
					bg : '#AE81FF',
					time : 2
				});
				$("#MISC_TX").focus();
				return false;
			}
			if ($("#XYM").val() == "") {
				$("#XYM").tips({
					side : 3,
					msg : '请输入响应码',
					bg : '#AE81FF',
					time : 2
				});
				$("#XYM").focus();
				return false;
			}
			if ($("#XYXX").val() == "") {
				$("#XYXX").tips({
					side : 3,
					msg : '请输入响应信息',
					bg : '#AE81FF',
					time : 2
				});
				$("#XYXX").focus();
				return false;
			}
			$.post(/*[[@{'/infoquery/dataexchange'+${action}}]]*/,$("#Form").serializeJSON(),function(data){
				if(data == 'SUCCESS'){
					cancel();
				}else{
					alert(data);
				}
			});
		}
		$(function(){
			//下拉框
			if (!ace.vars['touch']) {
				$('.chosen-select').chosen({
					allow_single_deselect : true
				});
				$(window).off('resize.chosen').on('resize.chosen', function() {
					$('.chosen-select').each(function() {
						var $this = $(this);
						$this.next().css({
							'width' : $this.parent().width()
						});
					});
				}).trigger('resize.chosen');
				$(document).on('settings.ace.chosen',
						function(e, event_name, event_val) {
							if (event_name != 'sidebar_collapsed')
								return;
							$('.chosen-select').each(function() {
								var $this = $(this);
								$this.next().css({
									'width' : $this.parent().width()
								});
							});
						});
				$('#chosen-multiple-style .btn').on(
						'click',
						function(e) {
							var target = $(this).find('input[type=radio]');
							var which = parseInt(target.val());
							if (which == 2)
								$('#form-field-select-4').addClass(
										'tag-input-style');
							else
								$('#form-field-select-4').removeClass(
										'tag-input-style');
						});
			}
		});
	</script>
</body>
</html>